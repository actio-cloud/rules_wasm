load("@bazel_skylib//rules:build_test.bzl", "build_test")
load("//:private.bzl", "execution_platforms")

# Download all binaries for all platforms
# to make sure the checksums are correct in MODULE.bazel.

binaries = {
    "wasmtime": ":wasmtime",
    "wasm-tools": ":wasm-tools",
    "wit-bindgen": ":wit-bindgen",
    "wac": "file",
}

build_test(
    name = "fetch-binaries",
    targets = [
        "@{}-{}//{}".format(repo_name, platform, target_name)
        for repo_name, target_name in binaries.items()
        for platform in execution_platforms
    ],
)
